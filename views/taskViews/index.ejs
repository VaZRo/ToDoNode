<!doctype html>
<html lang="en">
<head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
  	<title>Main Page</title>
  	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  	<link rel="stylesheet" type="text/css" href="/style.css">
	<link rel="stylesheet" href="/node_modules/bootstrap-icons/font/bootstrap-icons.css" type="text/css">

</head>
<body class="d-flex align-items-center justify-content-center vh-100">
  	<div class="container">
    	<div class="row justify-content-center">
      		<div class="col-md-8">
        		<div class="card custom-row-height main-box">
          			<div class="card-body d-flex flex-column justify-content-center">
            			<div class="row d-flex justify-content-center mt-4">	
							<h3 class="col-4 text-lg-center">To Do App</h3>
						</div>
						<form method="get" action="/tasks/" enctype="application/x-www-form-urlencoded" class="row d-flex justify-content-center add-form">
							<input type="text" name="title" placeholder="Enter a title here" class="form-control input-field"/>
							<button type="submit" class="col-1 btn btn-save d-flex align-items-center justify-content-center">Search</button>
						</form>
						<div class="row d-flex justify-content-center flex-grow-1 overflow-auto scrollbar" style="max-height: 300px;">
							<div class="col-12">
								<div class="table-responsive">
									<table class="table todo-table">
										<thead>
											<tr>
												<th scope="col">Todo</th>
												<th scope="col">Status</th>
												<th scope="col">Actions</th>
											</tr>
										</thead>
										<tbody>    
											<% if (tasks && tasks.length > 0) { %>
												<% tasks.forEach(function(item) { %>
													<tr>
														<td class="col-md-4 align-middle"><%= item.title %></td>
														<% if(item.isComplete){ %>
															<td class="col-md-4 align-middle completed-task">
																Done
															</td>
															<td class="col-md-4">
																<div class="buttons d-flex">
																	<a href="/tasks/deleteTask/<%= item._id %>" class="btn btn-delete d-flex align-items-center justify-content-center">
																		<i class="bi bi-trash3-fill"></i>
																	</a>
																	<a href="/tasks/editTask/<%= item._id %>" class="btn btn-change-task d-flex align-items-center justify-content-center ms-2">
																		<i class="bi bi-pencil-square"></i>
																	</a>
																</div>
															</td>			
														<% } else { %>
															<td class="col-md-4 align-middle">
																In Progress
															</td>
															<td class="col-md-4">
																<div class="buttons d-flex">
																	<a href="/tasks/deleteTask/<%= item._id %>" class="btn btn-delete d-flex align-items-center justify-content-center">
																		<i class="bi bi-trash3-fill"></i>
																	</a>
																	<a href="/tasks/editTask/<%= item._id %>" class="btn btn-change-task d-flex align-items-center justify-content-center ms-2">
																		<i class="bi bi-pencil-square"></i>
																	</a>
																	<a href="/tasks/changeStatus/<%= item._id %>" class="btn btn-change ms-2 d-flex align-items-center justify-content-center">
																		<i class="bi bi-check-lg"></i>
																	</a>
																</div>
															</td>
														<% } %>													
													</tr>
												<% }); %>
											<% } else { %>
												<tr>
													<td colspan="3">All Done</td>
												</tr>
											<% } %>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<p><%= currentDateTime %></p>
						<div class="row d-flex justify-content-center align-items-center bottom-btns">
							<div class="col-3 d-flex justify-content-center">
								<a class="btn btn-default" href="/tasks/addTask">Add Task</a>
							</div>
							<div class="col-3 d-flex justify-content-center">
								<a class="btn btn-danger" href="/users/logout">Logout</a>
							</div>
						</div>
          			</div>
        		</div>
      		</div>
    	</div>
  	</div>

  	<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
